## avito-shop

**Контакты для связи**
- https://t.me/sonialeena
- ramazanovshamil202@yandex.ru

**Сборка проекта, прогон тестов, прогон линтеров**
- make (сборка образа и поднятие контейнеров)
- make test (прогон тестов, работает только при запущенном сервисе)
- make clean (docker-compose down)
- make lint (прогон линтеров)

### Вопрос 1. Надо ли соблюсти параллельные запросы когда пользователь покупает товар и в то же время ему приходят деньги
    Я решил эту проблему, добавив уровень изоляции SERIAZABLE, но и с этим понизилась производительность запросов
### Вопрос 2. Нормализация БД
    У меня возникла мысль чтобы создать корзину для пользовател, но я решил использовать одну таблицу для покупок у всех
    юзеров так как не хотел джоинить таблицы а сразу взять из одной, так как в условиях написано что количесвто товара в 
    магазине бесконечно я могу не создавать корзину и в таблице purchases всегда будут актуальные данные
### Вопрос 3. Возник вопрос по ценам нам товары и соответственно баланс, что если добавяться копейки, валюта будет разная
    Я решил оставить как есть int, так как в условиях четко не прописано. Но конечно лучше подход сделать структуру с
    целой частью и копейками или только с копейками или центами
### Вопрос 4. 3 запроса или 1 
    Я задался вопросом, что лучше использовать например в методе получения информации по юзеру: 3 разных запроса в бд
    соответственно 3 метода или лучше сделать один-два но и использованием джоинов, я посчитал, что лучше использовать 3
    разных запроса для получения информации, потому что сейчас мы получаем ее из постгрес, но у нас может измениться логика
    и мы решим получать это из кэша, поэтому я оставил 3 запроса
### Вопрос 5. JWT токен
    Я хотел проработать систему чтобы при авторизации у меня токен вставлялся в заголовок автоматически, чтобы я сам ручками
    каждый раз это не делал, но я знаю что токен сохраняется в куки на клиентской стороне(фронте), поэтому я решил отказаться
    от этой реализации
### Вопрос 6. Интеграционные тесты, тестовая БД
    Для реализации интеграционных тестов требуется тестовая БД для отрабатки наших тестов.
    Создал тестувую дб, конфиг описан в докеркомпоз файле.
    Применил миграции уже существующие к ним

